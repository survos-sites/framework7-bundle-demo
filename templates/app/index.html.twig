{% extends 'base.html.twig' %}

{% block javascripts '' %}
{% block title %}Voxitour{% endblock %}

{% block body %}

    <div>
        VoxiTour landing

        <p>
            Welcome, this is the voxitour landing page. It is NOT part of the app, but rather a list of framework7
            "configurations",
            which for our purposes are also voxitour apps.
            see <a href="https://github.com/Spomky-Labs/pwa-bundle/issues/286">Manifest question</a>
        </p>
        <a href="{{ path('app_screenshots') }}">Screenshots</a>
        {# <a href="{{ path('app_login') }}">Login</a> #}
{#        <a href="{{ path('app_basic') }}">Basic</a>#}

        <div class="overflow-auto">
            <table class="striped">
                <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">QR</th>
                    <th scope="col">data</th>
                    <th scope="col">tabs</th>
                </tr>
                </thead>
                <tbody>
                {% for code, config in configs %}
                    <tr>
                        <td>
                                {{ code }}
                        </td>
                        <td>
                            {% for locale in app.enabled_locales %}
                                {% set url = url('project_start', {configCode: code, _locale: locale}) %}
                                <a href="{{ url }}" target="_blank" title="{{ url }}">
                                    <img src="{{ qr_code_url(url) }}" alt="{{ url }}"/>
                                    <code>{{ locale }}</code>
                                </a>

                            {% endfor %}
                        </td>
                        <td>
                            <ol>
                                {% for tab in config.tabs %}
                                    <li>
                                        <a href="{{ path('project_start', {configCode: code, _fragment: 'tab-' ~ tab}) }}">
                                            {{ tab }}
                                        </a>
                                    </li>
                                {% endfor %}

                            </ol>
                        </td>
                        <td>
                            <ol>
                                {% for data in config.stores %}
                                    <li><code>{{ data.name }}</code> => <a href="{{ data.url }}"
                                                                            target="_blank">{{ data.url }}</a></li>
                                {% endfor %}
                            </ol>
                        </td>
                    </tr>
                {% endfor %}

                </tbody>
            </table>
        </div>

    </div>
{% endblock %}

{% block content %}

    This is the INITIAL page, generated by PHP.
    the content is not (yet) loaded by the router, since it is the framework itself.

    {% set store='items' %}
    {% set globals  = {

    } %}

    configs, generated by twig.  This is only for the home page of the VoxitRoute app.

    <twig:dexie
            refreshEvent="app.load"
            :store="store"
            :globals="globals"
            :filter="{}"
            :caller="_self">
        <twig:block name="title">
            there are {{ rows|length }} rows
        </twig:block>

        <twig:block name="twig_template" id="hack_to_get_raw_data">
            <span class="pokemon-count">there are {{ rows|length }} rows </span>
            <!-- hack_to_get_raw_data -->
        </twig:block>

    </twig:dexie>


{% endblock %}

